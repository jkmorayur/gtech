$(document).ready(function () {
     $('.add_to_cart').click(function () {
          var id = $(this).attr('id');
          var qty = $('#txtQty').val();
          $.ajax({
               type: 'post',
               url: base_url + '/cart/addToCart/',
               data: {id: id,qty: qty},
               dataType: 'json',
               success: function (resp) {
                    $('#cart_count').html(resp.cart_count);
                    messageBox(resp);
                    //window.location =  base_url + '/cart';
               }
          });
     });
     $("#frmNewsletter").submit(function (e) {
          e.preventDefault();
     }).validate({
          rules: {
               nltr_email: {
                    required: true,
                    email: true
               }
          },
          messages: {
               nltr_email: {
                    required: '<img title="Please enter email" class="newsletter_error" src="images/red_warning.png"/>',
                    email: '<img title="Please enter valid email" class="newsletter_error" src="images/red_warning.png"/>'
               }
          },
          submitHandler: function (form) {
               $.ajax({
                    type: 'post',
                    url: base_url + 'contactus/newsletter/',
                    data: {email: $('#nltr_email').val()},
                    dataType: 'json',
                    success: function (resp) {
                         messageBox(resp);
                         $('#nltr_email').val('');
                    }
               });
          }
     });      
     $('#cmbCategory').change(function () {
          var cat = $(this).val();
          window.location = base_url + '/product/cat/' + cat;
     });
     $('#cmbSubCategory').change(function () {
          var cat = $(this).val();
          window.location = base_url + '/product/subcat/' + cat;
     });
     /*Product brand change*/
//     $('#cmbBrand').change(function () {
//          var id = $('#cmbBrand').find('option:selected').text().toLowerCase();
//          if (id == 'filter by brands') { 
//               id = '';
//          }
//          if(!url_segment[3]) {
//               url_segment[3] = 0;
//          }
//          if(url_segment[2] == 'cat') {
//               url = base_url + '/product/cat/' + url_segment[3] + '/' + id + '/0';
//          } else if(url_segment[2] == 'brand') {
//               url = base_url + '/product/brand/' + id;
//          } else if(url_segment[2] == 'all_featured_products') {
//               url = base_url + '/product/all_featured_products/' + id + '/0';
//          } else {
//               url = base_url + '/product/brand/' + id;
//          }
//          window.location = url;
//     });
     $("#tags").autocomplete({
          source: base_url + "/home/getAutocompleteForSearch",
          minLength: 1
     });
}); 

function messageBox(responce) {
     //if (responce.status == 'success') {
     $(".msgBox").show();
     $("#msg").html(responce.msg);
     $(".msgBox").slideDown("slow", function () {
     });
     //}
}